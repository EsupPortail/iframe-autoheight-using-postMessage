<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
  <style type="text/css">
    #links { margin-right: 4em; }
  </style>
</head>

<body>

 <span id="links">
  Load :
  <a href="test-content.html?p=0">0</a>
  <a href="test-content.html?p=1">1</a>
  <a href="test-content.html?p=2">2</a>
  <a href="test-content.html?p=3">3</a>
  <a href="test-content.html?p=4">4</a>
  <a href="test-content.html?p=5">5</a>
  <a href="test-content.html?p=6">6</a>
  <a href="test-content.html?p=7">7</a>  
 </span>

 <span id="links_ajax">
  Javascript :
  <a href="test-content.html#p=0">0</a>
  <a href="test-content.html#p=1">1</a>
  <a href="test-content.html#p=2">2</a>
  <a href="test-content.html#p=3">3</a>
  <a href="test-content.html#p=4">4</a>
  <a href="test-content.html#p=5">5</a>
  <a href="test-content.html#p=6">6</a>
  <a href="test-content.html#p=7">7</a>
 </span>

 <div id="paragraphs">
  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis rutrum, sem ut lobortis viverra, odio dui pellentesque mi, vel viverra elit leo at nisl. Nam sem ligula, vulputate id faucibus ut, tempus nec elit. Nullam euismod bibendum egestas. </p>
  <p> Phasellus nibh eros, varius sit amet semper vel, porttitor sit amet leo. Duis aliquam risus id nisl fermentum posuere. Pellentesque ante metus, faucibus in faucibus ut, condimentum ac enim. Etiam pharetra sapien tincidunt leo auctor faucibus. Quisque ultricies velit eu odio lacinia semper. Cras euismod, tellus at vehicula consectetur, erat risus lacinia velit, vel faucibus augue tortor sed est. Sed elementum, ligula ac vestibulum vestibulum, eros odio dapibus nisi, at sodales quam neque eget magna. Vivamus in mauris mauris, a varius ligula. Fusce ut nibh non diam convallis dapibus. </p>
  <p> Ut vel nulla massa. Cras molestie tempor semper. Nullam mollis, ligula nec elementum semper, ligula neque tristique leo, vitae pretium ligula lorem at risus. Nullam sed nulla libero. Etiam faucibus, tellus in accumsan convallis, nisl ante sollicitudin felis, a dictum elit mi vitae tortor. Sed accumsan rutrum dui ac tincidunt. Curabitur eros metus, lobortis eget ornare ac, tincidunt id mauris. </p>
  <p> Integer facilisis urna euismod lacus sagittis dapibus. In imperdiet neque at risus pharetra et eleifend diam imperdiet. Donec enim nisl, mollis quis adipiscing ut, eleifend id urna. Phasellus accumsan aliquam metus, et tincidunt augue dapibus venenatis. Fusce lobortis ultricies hendrerit. Morbi et nibh eget arcu dapibus vestibulum sed congue mauris. Aenean sed arcu orci, a adipiscing sem. Aenean condimentum enim vel felis viverra quis bibendum nisl dapibus. In facilisis felis non risus commodo in sodales turpis volutpat. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut tincidunt facilisis tincidunt. Pellentesque in turpis ipsum, nec feugiat velit. Maecenas nibh erat, elementum sit amet elementum nec, fermentum id quam. </p>
  <p> Morbi porttitor semper nisl, quis ullamcorper augue scelerisque vel. Aenean eros metus, gravida ac rutrum eu, eleifend ac lectus. Nam sed turpis rutrum nibh viverra posuere. Maecenas sed justo nibh. Duis laoreet, nisl et ullamcorper cursus, ipsum lectus lobortis risus, at scelerisque metus ligula non leo. Donec fringilla consectetur ipsum, at lobortis nisl consequat vel. Donec auctor lectus ac dui fermentum vel eleifend tortor ultricies. Mauris suscipit suscipit justo non pharetra. Fusce vel nunc ultrices odio tincidunt luctus et sit amet tortor. Pellentesque quam nisi, facilisis eget facilisis eu, dignissim ac mauris. Suspendisse eu tincidunt lorem. In posuere orci id lectus pellentesque consectetur. </p>
  <p> Nam vel odio dui. Praesent tincidunt enim ac magna vehicula vitae sodales justo convallis. Morbi non lacus id nisi condimentum convallis. Vestibulum interdum gravida sem eget luctus. Nam aliquet pharetra dapibus. Quisque fermentum venenatis lectus, at aliquet velit mattis et. Ut posuere vulputate sem eu vulputate. </p>
  <p> Pellentesque eu purus metus, quis consectetur erat. Maecenas eu mauris quis lorem rhoncus adipiscing at ac elit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nulla sodales pulvinar dolor in viverra. Integer sodales sem et nibh cursus blandit. Cras non massa a sapien suscipit imperdiet. Aliquam erat volutpat. Suspendisse sit amet condimentum justo. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Pellentesque odio neque, fringilla in tempor a, scelerisque sit amet lacus. Integer non sapien viverra orci molestie pellentesque. </p>
  <p> Phasellus in scelerisque sapien. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque adipiscing imperdiet justo vitae ornare. Maecenas tempor dapibus laoreet. Vivamus volutpat justo sed erat viverra fermentum. Nulla a sapien quis metus rutrum malesuada. Maecenas at nisl sem. Aenean in dolor leo. Vestibulum bibendum vestibulum quam. Aliquam erat volutpat. Aliquam erat volutpat. Phasellus at dolor at diam consequat porttitor. Phasellus tincidunt, velit quis venenatis pharetra, elit massa volutpat libero, quis suscipit leo sem et dui. Duis blandit turpis duis. </p>
 </div>

<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script src="postMessage-resize-iframe-in-parent.js" type="text/javascript"></script>
<script src="postMessage-resize-iframe-in-parent.js" type="text/javascript"></script>

<script language="javascript" type="text/javascript">
function set_numbers_of_p(nb) {
   $("#paragraphs p").each(function (i) {
      $(this).css({ display: (i >= nb  ? "none" : "block") });
   });
}
function may_set_numbers_of_p(url) {
  var r = url.match("\\bp=(\\d+)");
  if (r) set_numbers_of_p(r[1])
}

$("#links_ajax a").click(function () {
   may_set_numbers_of_p($(this).attr("href"));
   return true; // IMPORTANT: with "return false", there is no way for postMessage-resize-iframe-in-parent.js to know about this click
});

may_set_numbers_of_p(document.URL);
</script>

</body>
</html>
